<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>완대전</title>
    <meta
      name="description"
      content="완도고등학교 학생들을 위한 웹 커뮤니티 사이트입니다."
    />

    <!-- Open Graph 태그 (소셜 미디어 공유용) -->
    <meta property="og:title" content="완대전" />
    <meta
      property="og:description"
      content="완도고등학교 학생들을 위한 웹 커뮤니티 사이트입니다."
    />
    <meta property="og:image" content="https://wdj.kr/content.png" />
    <meta property="og:url" content="https://wdj.kr/" />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="asset/icon/apple-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="asset/icon/apple-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="asset/icon/apple-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="asset/icon/apple-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="asset/icon/apple-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="asset/icon/apple-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="asset/icon/apple-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="asset/icon/apple-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="asset/icon/apple-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="asset/icon/apple-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="asset/icon/apple-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="asset/icon/apple-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="asset/icon/apple-icon-180x180.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="asset/icon/android-icon-192x192.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="asset/icon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="asset/icon/favicon-96x96.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="asset/icon/favicon-16x16.png"
    />
    <link rel="manifest" href="/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Pretendard", "sans-serif"],
            },
            colors: {
              primary: {
                50: "#E6F0FF",
                100: "#CCE0FF",
                200: "#99C2FF",
                300: "#66A3FF",
                400: "#3385FF",
                500: "#0066FF",
                600: "#0052CC",
                700: "#003D99",
                800: "#002966",
                900: "#001433",
              },
            },
          },
        },
      };
    </script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      #mobile-menu {
        position: fixed;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100vh;
        background-color: #2563eb;
        transition: left 0.3s ease-in-out;
        z-index: 50;
      }

      #mobile-menu.active {
        left: 0;
      }

      .mobile-menu-content {
        padding: 2rem;
        height: 100%;
        overflow-y: auto;
      }

      .mobile-menu-link {
        display: block;
        padding: 1rem;
        color: white;
        font-size: 1.125rem;
        border-radius: 0.5rem;
        transition: all 0.2s;
      }

      .mobile-menu-link:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .nav-link {
        padding: 0.5rem 0;
        position: relative;
        display: inline-block;
      }

      .nav-link::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: white;
        transform: scaleX(0);
        transform-origin: right;
        transition: transform 0.3s ease;
      }

      .nav-link:hover::after {
        transform: scaleX(1);
        transform-origin: left;
      }

      .nav-link.active::after {
        transform: scaleX(1);
      }

      .nav-link:hover {
        transform: translateY(-1px);
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
  </head>
  <body class="bg-gray-100 font-sans">
    <header
      class="bg-gradient-to-r from-blue-600 to-blue-700 shadow-lg py-2 mb-8 fixed w-full top-0 z-50"
    >
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-3">
          <div class="flex justify-start lg:w-0 lg:flex-1">
            <a
              href="index.html"
              class="text-3xl font-bold text-white hover:text-gray-100 transition-all duration-300 transform hover:scale-105"
            >
              완·대·전
            </a>
          </div>
          <nav class="hidden md:flex space-x-8">
            <a
              href="pages/notice.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">공지사항</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
            <a
              href="pages/community.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">커뮤니티</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
            <a
              href="pages/petition.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">청원·제안</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
            <a
              href="pages/utility.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">학급 도우미</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
            <a
              href="pages/about.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">소개</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
          </nav>
          <div class="md:hidden">
            <button
              id="mobile-menu-button"
              class="rounded-lg p-2 inline-flex items-center justify-center text-white hover:bg-blue-500/50 transition-all duration-300"
              aria-label="메뉴 열기"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div id="mobile-menu" class="md:hidden">
        <div class="mobile-menu-content">
          <div class="flex justify-between items-center mb-8">
            <a href="index.html" class="text-2xl font-bold text-white">
              완·대·전
            </a>
            <button
              id="mobile-menu-close"
              class="p-2 rounded-lg text-white hover:bg-blue-500/50 transition-all duration-300"
              aria-label="메뉴 닫기"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>

          <nav class="space-y-4">
            <a href="pages/notice.html" class="mobile-menu-link"> 공지사항 </a>
            <a href="pages/community.html" class="mobile-menu-link">
              커뮤니티
            </a>
            <a href="pages/petition.html" class="mobile-menu-link">
              청원·제안
            </a>
            <a href="pages/utility.html" class="mobile-menu-link">
              학급 도우미
            </a>
            <a href="pages/about.html" class="mobile-menu-link"> 소개 </a>
          </nav>
        </div>
      </div>
    </header>
    <main class="w-full sm:container mx-auto mt-24 mb-16 px-4 sm:px-8">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <section
          class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 p-6"
        >
          <h3 class="text-2xl font-bold mb-4 text-blue-700 flex items-center">
            <i class="fas fa-bullhorn mr-2"></i>
            공지사항
          </h3>
          <ul id="noticeList" class="space-y-2">
            <!-- 공지사항이 여기에 동적으로 추가됩니다 -->
          </ul>
          <a
            href="pages/notice.html"
            class="text-blue-500 hover:underline mt-4 inline-block"
            >더 보기</a
          >
        </section>

        <section
          class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 p-6"
        >
          <h2 class="text-2xl font-bold mb-6 text-blue-700">급식</h2>
          <div id="mealInfo" class="relative">
            <div class="flex items-center justify-between mb-4">
              <button
                id="prevDate"
                aria-label="이전 날짜"
                class="text-blue-500 hover:text-blue-700 transition duration-300"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 19l-7-7 7-7"
                  />
                </svg>
              </button>
              <h3
                id="currentDate"
                class="text-lg font-semibold text-blue-600"
              ></h3>
              <button
                id="nextDate"
                aria-label="다음 날짜"
                class="text-blue-500 hover:text-blue-700 transition duration-300"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </button>
            </div>
            <div class="flex items-center justify-between mb-4">
              <button
                id="prevMeal"
                aria-label="이전 급식"
                class="text-blue-500 hover:text-blue-700 transition duration-300"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 19l-7-7 7-7"
                  />
                </svg>
              </button>
              <h3
                id="mealType"
                class="text-lg font-semibold text-blue-600"
              ></h3>
              <button
                id="nextMeal"
                aria-label="다음 급식"
                class="text-blue-500 hover:text-blue-700 transition duration-300"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </button>
            </div>
            <div id="mealContent" class="mt-4"></div>
          </div>
        </section>

        <section
          class="bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 p-6"
        >
          <div id="loginSection">
            <h3 class="text-2xl font-bold mb-6 text-blue-700 flex items-center">
              <i class="fas fa-user-circle mr-2"></i>
              로그인
            </h3>
            <form id="loginForm" class="space-y-4">
              <div>
                <input
                  type="text"
                  id="loginUsername"
                  class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"
                  placeholder="아이디"
                />
              </div>
              <div class="mb-4">
                <input
                  type="password"
                  id="loginPassword"
                  name="password"
                  placeholder="비밀번호"
                  class="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
              </div>
              <button
                type="submit"
                class="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600 transition duration-300"
              >
                로그인
              </button>
            </form>
            <div class="mt-6 space-y-3">
              <p class="text-gray-600 text-center">계정이 없으신가요?</p>
              <div class="text-center">
                <a
                  href="pages/signup.html"
                  class="text-blue-500 hover:text-blue-700"
                  >회원가입</a
                >
              </div>
              <div class="text-center">
                <a
                  href="pages/find-password.html"
                  class="text-blue-500 hover:text-blue-700"
                  >비밀번호 찾기</a
                >
              </div>
            </div>
            <p id="loginMessage" class="text-center text-red-500 mt-4"></p>
          </div>

          <div id="userInfoSection" class="hidden">
            <h3 class="text-2xl font-bold mb-4 text-blue-700">사용자 정보</h3>
            <div class="space-y-2">
              <p>
                <span class="text-gray-600 w-24 inline-block">이름:</span
                ><span id="userName" class="font-semibold"></span>
              </p>
              <p>
                <span class="text-gray-600 w-24 inline-block">학번:</span
                ><span id="userUsername" class="font-semibold"></span>
              </p>
              <p>
                <span class="text-gray-600 w-24 inline-block">닉네임 :</span
                ><span id="userNickname" class="font-semibold"></span>
              </p>
            </div>

            <!-- 관리자 페이지 버튼 추가 -->
            <div id="adminButton" class="hidden mt-4">
              <a
                href="pages/admin-dashboard.html"
                class="block w-full bg-purple-600 text-white text-center p-2 rounded hover:bg-purple-700 transition duration-300"
              >
                관리자 페이지
              </a>
            </div>

            <button
              id="logoutButton"
              class="w-full bg-red-500 text-white p-2 rounded hover:bg-red-600 transition duration-300 mt-4"
            >
              로그아웃
            </button>
            <div class="text-center mt-4">
              <a
                href="pages/find-password.html"
                class="text-blue-500 hover:text-blue-700"
                >비밀번호 변경</a
              >
            </div>
          </div>
        </section>
      </div>

      <section
        class="bg-gradient-to-r from-blue-500 to-blue-700 rounded-2xl shadow-xl p-8 mb-12"
      >
        <h2 class="text-4xl font-bold mb-4 text-white">환영합니다!</h2>
        <p class="text-xl text-white/90">
          완도고등학교 학생들을 위한<br />
          커뮤니티, 완대전에 오신 것을 환영합니다.
        </p>
      </section>

      <div
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-8"
      >
        <section class="bg-white rounded-lg shadow-md p-4 sm:p-6">
          <h3 class="text-2xl font-bold mb-4 text-blue-700">학사일정</h3>
          <div class="flex justify-between items-center mb-4">
            <button
              id="prevMonth"
              class="text-blue-500 hover:text-blue-700 transition duration-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 19l-7-7 7-7"
                />
              </svg>
            </button>
            <span
              id="currentMonth"
              class="text-lg font-semibold text-gray-800"
            ></span>
            <button
              id="nextMonth"
              class="text-blue-500 hover:text-blue-700 transition duration-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </button>
          </div>
          <div class="h-48 sm:h-64 overflow-y-auto pr-2">
            <ul id="scheduleList" class="space-y-3">
              <!-- 학사일정 항목들이 여기에 동적으로 추가됩니다 -->
            </ul>
          </div>
        </section>

        <section class="bg-white rounded-lg shadow-md p-4 sm:p-6">
          <h3 class="text-2xl font-bold mb-4 text-blue-700">커뮤니티</h3>
          <ul id="communityList" class="space-y-2">
            <!-- 커뮤니티 글 목록이 여기에 동적으로 추가됩니다 -->
          </ul>
          <a
            href="pages/community.html"
            class="text-blue-500 hover:underline mt-4 inline-block"
            >더 보기</a
          >
        </section>

        <section class="bg-white rounded-lg shadow-md p-4 sm:p-6">
          <h3 class="text-2xl font-bold mb-4 text-blue-700">청원·제안</h3>
          <ul id="petitionList" class="space-y-2">
            <!-- 청원 목록이 여기에 동적으로 추가됩니다 -->
          </ul>
          <a
            href="pages/petition.html"
            class="text-blue-500 hover:underline mt-4 inline-block"
            >더 보기</a
          >
        </section>
      </div>
    </main>

    <footer
      class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white py-10"
    >
      <div class="container mx-auto px-6 lg:px-8">
        <!-- 모바일용 푸터 -->
        <div class="md:hidden space-y-6">
          <div class="text-center">
            <h3 class="text-xl font-bold text-white mb-2">완·대·전</h3>
            <p class="text-gray-400 text-sm">
              완도고등학교 학생들을 위한<br />
              온라인 커뮤니티 플랫폼
            </p>
          </div>

          <div class="flex justify-center space-x-4">
            <a
              href="pages/notice.html"
              class="text-gray-400 hover:text-blue-400 text-sm"
              >공지사항</a
            >
            <a
              href="pages/community.html"
              class="text-gray-400 hover:text-blue-400 text-sm"
              >커뮤니티</a
            >
            <a
              href="pages/petition.html"
              class="text-gray-400 hover:text-blue-400 text-sm"
              >청원·제안</a
            >
          </div>

          <div class="text-center text-sm text-gray-400">
            <a href="mailto:sungblab@gmail.com" class="hover:text-blue-400">
              sungblab@gmail.com
            </a>
          </div>
        </div>

        <!-- 데스크톱용 푸터 -->
        <div class="hidden md:grid grid-cols-3 gap-8">
          <!-- 기존 데스크톱 푸터 내용 유지 -->
          <div class="space-y-3">
            <h3 class="text-xl font-bold text-white mb-2">완·대·전</h3>
            <p class="text-gray-400 text-sm leading-relaxed">
              완도고등학교 학생들을 위한<br />
              더더 나 학교생활을 만들어가는<br />
              온라인 커뮤니티 플랫폼
            </p>
          </div>

          <div class="space-y-3">
            <h4 class="text-lg font-semibold text-white mb-2">바로가기</h4>
            <ul class="space-y-1.5">
              <li>
                <a
                  href="pages/notice.html"
                  class="text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
                  >공지사항</a
                >
              </li>
              <li>
                <a
                  href="pages/community.html"
                  class="text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
                  >커뮤니티</a
                >
              </li>
              <li>
                <a
                  href="pages/petition.html"
                  class="text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
                  >청원·제안</a
                >
              </li>
              <li>
                <a
                  href="pages/utility.html"
                  class="text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
                  >학급 도우미</a
                >
              </li>
            </ul>
          </div>

          <div class="space-y-3">
            <h4 class="text-lg font-semibold text-white mb-2">문의 및 정책</h4>
            <div class="space-y-1.5">
              <p class="flex items-center text-gray-400 text-sm">
                <i class="fas fa-envelope mr-2"></i>
                <a
                  href="mailto:sungblab@gmail.com"
                  class="hover:text-blue-400 transition-colors duration-300"
                  >sungblab@gmail.com</a
                >
              </p>
              <p class="flex items-center text-gray-400 text-sm">
                <i class="fas fa-map-marker-alt mr-2"></i>
                전남 완도군 완도읍 개포로 134
              </p>
              <a
                href="/pages/privacy-policy.html"
                class="block text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
              >
                <i class="fas fa-shield-alt mr-2"></i>
                개인정보 처리방침
              </a>
            </div>
          </div>
        </div>

        <!-- 공통 하단 영역 -->
        <div class="border-t border-gray-700 mt-8 pt-6">
          <div class="flex flex-col items-center space-y-3">
            <p class="text-xs text-gray-400 text-center">
              &copy; 2024 완도고등학교 학생회. All rights reserved.
            </p>
            <div class="flex space-x-4">
              <a
                href="#"
                class="text-gray-400 hover:text-blue-400 transition-colors duration-300"
              >
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const API_KEY = "91f8dc8c8135439b8361d3540e05ec70";
        const SCHOOL_CODE = "8490065";
        const OFFICE_CODE = "Q10";
        const SPECIFIC_DATE = "20230512"; // 2023년 5월 12일

        let currentDate = new Date();

        const mobileMenuButton = document.getElementById("mobile-menu-button");
        const mobileMenuClose = document.getElementById("mobile-menu-close");
        const mobileMenu = document.getElementById("mobile-menu");
        const loginForm = document.getElementById("loginForm");
        const loginMessage = document.getElementById("loginMessage");
        const logoutButton = document.getElementById("logoutButton");
        const loginSection = document.getElementById("loginSection");
        const userInfoSection = document.getElementById("userInfoSection");
        const prevMonthBtn = document.getElementById("prevMonth");
        const nextMonthBtn = document.getElementById("nextMonth");
        const currentMonthSpan = document.getElementById("currentMonth");
        const scheduleList = document.getElementById("scheduleList");

        function toggleMenu(show) {
          if (show) {
            mobileMenu.classList.add("active");
            document.body.style.overflow = "hidden";
          } else {
            mobileMenu.classList.remove("active");
            document.body.style.overflow = "";
          }
        }

        mobileMenuButton.addEventListener("click", () => toggleMenu(true));
        mobileMenuClose.addEventListener("click", () => toggleMenu(false));

        // 모바일 메뉴 링크 클릭시 자동으로 메뉴 닫기
        const mobileMenuLinks = mobileMenu.getElementsByTagName("a");
        Array.from(mobileMenuLinks).forEach((link) => {
          link.addEventListener("click", () => toggleMenu(false));
        });

        // 화면 크기가 변경될 때 모바일 메뉴 상태 처리
        window.addEventListener("resize", () => {
          if (window.innerWidth >= 768) {
            // md 브레이크포인트
            toggleMenu(false);
          }
        });

        function updateUI(isLoggedIn, userData) {
          if (isLoggedIn && userData) {
            loginSection.classList.add("hidden");
            userInfoSection.classList.remove("hidden");
            document.getElementById("userName").textContent =
              userData.realName || "이름 없음";
            document.getElementById("userUsername").textContent =
              userData.username || "학번 없음";
            document.getElementById("userNickname").textContent =
              userData.nickname || "닉네임 없음";

            // 관리자 여부 확인 및 버튼 표시
            const adminButton = document.getElementById("adminButton");
            if (userData.isAdmin) {
              adminButton.classList.remove("hidden");
            } else {
              adminButton.classList.add("hidden");
            }
          } else {
            loginSection.classList.remove("hidden");
            userInfoSection.classList.add("hidden");
          }
        }

        async function checkLoginStatus() {
          const token = localStorage.getItem("token");
          if (token) {
            try {
              const response = await fetch(
                "https://port-0-wdj-back-lz9cd9taff85e9dc.sel4.cloudtype.app/api/user",
                {
                  headers: {
                    Authorization: `Bearer ${token}`,
                  },
                  credentials: "include",
                }
              );
              if (!response.ok) {
                throw new Error("Login session expired");
              }
              const userData = await response.json();
              localStorage.setItem("user", JSON.stringify(userData));
              updateUI(true, userData);
            } catch (error) {
              console.error("Error:", error);
              localStorage.removeItem("token");
              localStorage.removeItem("user");
              updateUI(false);
            }
          } else {
            updateUI(false);
          }
        }

        loginForm.addEventListener("submit", async function (e) {
          e.preventDefault();
          const username = document.getElementById("loginUsername").value;
          const password = document.getElementById("loginPassword").value;

          try {
            const response = await fetch(
              "https://port-0-wdj-back-lz9cd9taff85e9dc.sel4.cloudtype.app/api/login",
              {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                credentials: "include",
                body: JSON.stringify({ username, password }),
              }
            );

            const data = await response.json();

            if (response.ok) {
              localStorage.setItem("token", data.token);
              localStorage.setItem("user", JSON.stringify(data.user));

              loginMessage.textContent = "로그인 성공!";
              loginMessage.style.color = "green";

              updateUI(true, data.user);

              await Promise.all([
                fetchNotices(),
                fetchCommunityPosts(),
                updatePetitionSection(),
              ]);
            } else {
              loginMessage.textContent = data.message || "로그인 실패";
              loginMessage.style.color = "red";
            }
          } catch (error) {
            console.error("Error:", error);
            loginMessage.textContent = "로그인 중 오류가 발생했습니다.";
            loginMessage.style.color = "red";
          }
        });

        logoutButton.addEventListener("click", function () {
          localStorage.removeItem("token");
          localStorage.removeItem("user");
          window.location.reload();
        });

        async function fetchNotices() {
          try {
            const response = await fetch(
              "https://port-0-wdj-back-lz9cd9taff85e9dc.sel4.cloudtype.app/api/notices?limit=3"
            );
            if (!response.ok) {
              throw new Error("서버 응답 오류");
            }
            const data = await response.json();
            const noticeList = document.getElementById("noticeList");
            noticeList.innerHTML = "";
            data.notices.forEach((notice) => {
              const li = document.createElement("li");
              li.className = "flex items-center";
              li.innerHTML = `
          <span class="text-blue-500 mr-2"><i class="fas fa-info-circle"></i></span>
          <a href="pages/notice.html" class="text-gray-700 hover:text-blue-500 transition duration-300">${notice.title}</a>
        `;
              noticeList.appendChild(li);
            });
          } catch (error) {
            console.error("공지사항 불러오는 데 실패했습니다 :", error);
            const noticeList = document.getElementById("noticeList");
            noticeList.innerHTML =
              '<li class="text-red-500">공지사항을 불러오는 데 실패했습니다.</li>';
          }
        }

        let currentMealIndex = 0;
        const mealTypes = [
          { type: "조식", name: "아침" },
          { type: "중식", name: "점심" },
          { type: "석식", name: "저녁" },
        ];

        async function getMealInfo(date) {
          try {
            const formattedDate = date
              .toISOString()
              .slice(0, 10)
              .replace(/-/g, "");
            const response = await fetch(
              `https://port-0-wdj-back-lz9cd9taff85e9dc.sel4.cloudtype.app/api/meals?date=${formattedDate}`
            );

            if (!response.ok) {
              throw new Error("서버 응답 오류");
            }

            const meals = await response.json();
            updateMealInfo(meals, date);
          } catch (error) {
            console.error("급식 정보를 가져오는 데 실패했습니다:", error);
            updateMealInfo([], date);
          }
        }

        function updateMealInfo(meals, date) {
          const currentDateElement = document.getElementById("currentDate");
          const mealType = document.getElementById("mealType");
          const mealContent = document.getElementById("mealContent");

          currentDateElement.textContent = `${date.getFullYear()}년 ${
            date.getMonth() + 1
          }월 ${date.getDate()}일`;
          const currentMeal = mealTypes[currentMealIndex];
          mealType.textContent = `${currentMeal.name}`;

          const meal = meals.find((m) => m.MMEAL_SC_NM === currentMeal.type);

          if (meal) {
            const dishes = meal.DDISH_NM.split("<br/>");
            mealContent.innerHTML = `
        <ul class="list-disc pl-5 space-y-1">
          ${dishes.map((dish) => `<li>${dish.trim()}</li>`).join("")}
        </ul>
        <p class="text-sm text-gray-600 mt-2">칼로리: ${meal.CAL_INFO}</p>
      `;
          } else {
            mealContent.innerHTML =
              '<p class="text-gray-500">급식 정보가 없습니다.</p>';
          }
        }

        function moveMeal(direction) {
          currentMealIndex =
            (currentMealIndex + direction + mealTypes.length) %
            mealTypes.length;
          getMealInfo(currentDate);
        }

        function moveDate(direction) {
          currentDate.setDate(currentDate.getDate() + direction);
          getMealInfo(currentDate);
        }

        document
          .getElementById("nextMeal")
          .addEventListener("click", () => moveMeal(1));
        document
          .getElementById("prevMeal")
          .addEventListener("click", () => moveMeal(-1));
        document
          .getElementById("nextDate")
          .addEventListener("click", () => moveDate(1));
        document
          .getElementById("prevDate")
          .addEventListener("click", () => moveDate(-1));

        function formatDate(dateString) {
          const year = dateString.slice(0, 4);
          const month = dateString.slice(4, 6);
          const day = dateString.slice(6, 8);
          return `${month}월 ${day}일`;
        }

        async function getSchoolSchedule(year, month) {
          try {
            const response = await fetch(
              `https://port-0-wdj-back-lz9cd9taff85e9dc.sel4.cloudtype.app/api/schedule?year=${year}&month=${month}`
            );

            if (!response.ok) {
              throw new Error("서버 응답 오류");
            }

            const schedules = await response.json();
            return schedules;
          } catch (error) {
            console.error("학사일정을 가져오는 데 실패했습니다:", error);
            return [];
          }
        }

        function updateScheduleUI(schedules) {
          scheduleList.innerHTML = "";
          if (schedules.length === 0) {
            scheduleList.innerHTML =
              "<li class='text-gray-500 text-center'>이번 달 학사일정이 없습니다.</li>";
          } else {
            schedules.forEach((schedule) => {
              const li = document.createElement("li");
              li.className = "bg-gray-100 rounded-lg p-3 shadow-sm";
              li.innerHTML = `
          <span class="text-blue-600 font-semibold">${formatDate(
            schedule.AA_YMD
          )}</span>
          <p class="text-gray-800 mt-1">${schedule.EVENT_NM}</p>
        `;
              scheduleList.appendChild(li);
            });
          }
        }

        async function fetchPetitions() {
          try {
            const token = localStorage.getItem("token");
            const response = await fetch(
              "https://port-0-wdj-back-lz9cd9taff85e9dc.sel4.cloudtype.app/api/petitions?status=active&limit=3",
              {
                headers: {
                  Authorization: `Bearer ${token}`,
                },
              }
            );
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            return data.petitions;
          } catch (error) {
            console.error("청원 목록을 가져오는 중 오류 발생:", error);
            return [];
          }
        }

        function displayPetitions(petitions) {
          const petitionList = document.getElementById("petitionList");
          petitionList.innerHTML = "";

          if (petitions.length === 0) {
            petitionList.innerHTML =
              '<li class="text-gray-500">현재 진행 중인 청원이 없습니다.</li>';
            return;
          }

          petitions.forEach((petition) => {
            const li = document.createElement("li");
            li.className = "flex items-center justify-between";
            li.innerHTML = `
      <a href="pages/petition.html#${petition._id}" class="text-gray-700 hover:text-blue-500 transition duration-300">${petition.title}</a>
      <span class="text-sm text-gray-500">동의 ${petition.supporters.length}</span>
    `;
            petitionList.appendChild(li);
          });
        }

        async function updatePetitionSection() {
          const petitions = await fetchPetitions();
          displayPetitions(petitions);
        }

        async function updateMonthSchedule() {
          const year = currentDate.getFullYear();
          const month = currentDate.getMonth() + 1;
          currentMonthSpan.textContent = `${year}년 ${month}월`;

          const schedules = await getSchoolSchedule(year, month);
          updateScheduleUI(schedules);
        }

        prevMonthBtn.addEventListener("click", () => {
          currentDate.setMonth(currentDate.getMonth() - 1);
          updateMonthSchedule();
        });

        nextMonthBtn.addEventListener("click", () => {
          currentDate.setMonth(currentDate.getMonth() + 1);
          updateMonthSchedule();
        });

        // 커뮤니티 글 목록 가져오기
        async function fetchCommunityPosts() {
          try {
            // 토큰이 필요한 경우를 대비해 Authorization 헤더 추가
            const token = localStorage.getItem("token");
            const headers = token ? { Authorization: `Bearer ${token}` } : {};

            const response = await fetch(
              "https://port-0-wdj-back-lz9cd9taff85e9dc.sel4.cloudtype.app/api/posts?limit=3",
              {
                headers: headers,
              }
            );

            if (!response.ok) throw new Error("서버 응답 오류");

            const data = await response.json();
            const communityList = document.getElementById("communityList");
            communityList.innerHTML = "";

            if (!data.posts || data.posts.length === 0) {
              communityList.innerHTML =
                '<li class="text-gray-500">등록된 게시글이 없습니다.</li>';
              return;
            }

            data.posts.forEach((post) => {
              const li = document.createElement("li");
              li.className = "flex items-center justify-between py-2";
              li.innerHTML = `
                <a href="pages/community.html?id=${post._id}" 
                   class="text-gray-700 hover:text-blue-500 transition duration-300 truncate flex-1">
                  ${post.title}
                </a>
                <span class="text-sm text-gray-500 ml-2">
                  ${
                    post.isAnonymous
                      ? "익명"
                      : post.author?.nickname || "알 수 없음"
                  }
                </span>
              `;
              communityList.appendChild(li);
            });
          } catch (error) {
            console.error("커뮤니티 글을 불러오는 중 오류 발생:", error);
            const communityList = document.getElementById("communityList");
            communityList.innerHTML =
              '<li class="text-red-500">게시글을 불러오는데 실패했습니다.</li>';
          }
        }

        // 페이지 로드 시 실행할 함수들
        checkLoginStatus();
        fetchNotices();
        getMealInfo(currentDate);
        updateMonthSchedule();
        updatePetitionSection();
        fetchCommunityPosts(); // 커뮤니티 글 목록 가져오기 추가

        // 현재 페이지 URL 가져오기
        const currentPath = window.location.pathname;

        // 모든 네비게이션 링크에 대해
        document.querySelectorAll(".nav-link").forEach((link) => {
          // 링크의 href와 현재 페이지 경로가 일치하면 active 클래스 추가
          if (link.getAttribute("href").includes(currentPath)) {
            link.classList.add("active");
          }
        });
      });
    </script>
  </body>
</html>
