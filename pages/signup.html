<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>완대전</title>
    <meta
      name="description"
      content="완도고등학교 학생들을 위한 웹 커뮤니티 사이트입니다."
    />

    <!-- Open Graph 태그 (소셜 미디어 공유용) -->
    <meta property="og:title" content="완대전" />
    <meta
      property="og:description"
      content="완도고등학교 학생들을 위한 웹 커뮤니티 사이트입니다."
    />
    <meta property="og:image" content="https://wdj.kr/content.png" />
    <meta property="og:url" content="https://wdj.kr/" />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/asset/icon/apple-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="/asset/icon/apple-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/asset/icon/apple-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/asset/icon/apple-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/asset/icon/apple-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="/asset/icon/apple-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/asset/icon/apple-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/asset/icon/apple-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/asset/icon/apple-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/asset/icon/apple-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="/asset/icon/apple-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/asset/icon/apple-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/asset/icon/apple-icon-180x180.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="/asset/icon/android-icon-192x192.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/asset/icon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="/asset/icon/favicon-96x96.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/asset/icon/favicon-16x16.png"
    />
    <link rel="manifest" href="/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Pretendard", "sans-serif"],
            },
            colors: {
              primary: {
                50: "#E6F0FF",
                100: "#CCE0FF",
                200: "#99C2FF",
                300: "#66A3FF",
                400: "#3385FF",
                500: "#0066FF",
                600: "#0052CC",
                700: "#003D99",
                800: "#002966",
                900: "#001433",
              },
            },
          },
        },
      };
    </script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      #mobile-menu {
        transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
      }
      #mobile-menu.active {
        max-height: 400px;
        opacity: 1;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
  </head>
  <body class="bg-gray-100 font-sans">
    <header
      class="bg-gradient-to-r from-blue-600 to-blue-700 shadow-lg py-1 mb-8 fixed w-full top-0 z-50"
    >
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-3">
          <div class="flex justify-start lg:w-0 lg:flex-1">
            <a
              href="/index.html"
              class="text-2xl font-bold text-white hover:text-gray-100 transition-all duration-300 transform hover:scale-105"
            >
              완·대·전
            </a>
          </div>
          <nav class="hidden md:flex space-x-8">
            <a
              href="notice.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">공지사항</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
            <a
              href="community.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">커뮤니티</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
            <a
              href="petition.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">청원·제안</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
            <a
              href="utility.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">학급 도우미</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
            <a
              href="about.html"
              class="nav-link group relative text-base font-medium text-white transition-all duration-300"
            >
              <span class="relative z-10">소개</span>
              <span
                class="absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"
              ></span>
            </a>
          </nav>
          <div class="md:hidden">
            <button
              id="mobile-menu-button"
              class="rounded-lg p-2 inline-flex items-center justify-center text-white hover:bg-blue-500/50 transition-all duration-300"
              aria-label="메뉴 열기"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div id="mobile-menu" class="md:hidden">
        <div class="mobile-menu-content">
          <div class="flex justify-between items-center mb-4">
            <a href="/index.html" class="text-xl font-bold text-white"
              >완·대·전</a
            >
            <button
              id="mobile-menu-close"
              class="p-1.5 rounded-lg text-white hover:bg-blue-500/50 transition-all duration-300"
              aria-label="메뉴 닫기"
            >
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>
          <nav class="space-y-2">
            <a href="notice.html" class="mobile-menu-link text-sm">공지사항</a>
            <a href="community.html" class="mobile-menu-link text-sm"
              >커뮤니티</a
            >
            <a href="petition.html" class="mobile-menu-link text-sm"
              >청원·제안</a
            >
            <a href="utility.html" class="mobile-menu-link text-sm"
              >학급 도우미</a
            >
            <a href="about.html" class="mobile-menu-link text-sm">소개</a>
          </nav>
        </div>
      </div>
    </header>

    <main class="container mx-auto mt-8 px-4 mb-20">
      <div class="max-w-md mx-auto bg-white rounded-lg shadow-md p-8">
        <h2 class="text-3xl font-bold mb-6 text-blue-800 text-center">
          회원가입
        </h2>
        <form id="signupForm">
          <div class="mb-4">
            <label for="username" class="block text-gray-700 font-bold mb-2"
              >학번</label
            >
            <input
              type="text"
              id="username"
              name="username"
              pattern="[0-9]{4}"
              title="4자리 숫자로 된 학번을 입력해주세요"
              class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
            <p class="text-sm text-gray-500 mt-1">
              4자리 숫자로 된 학번을 입력해주세요
            </p>
          </div>
          <div class="mb-4">
            <label for="realName" class="block text-gray-700 font-bold mb-2"
              >실명</label
            >
            <input
              type="text"
              id="realName"
              name="realName"
              class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
          </div>
          <div class="mb-4">
            <label for="nickname" class="block text-gray-700 font-bold mb-2"
              >닉네임</label
            >
            <input
              type="text"
              id="nickname"
              name="nickname"
              class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
          </div>
          <div class="mb-4">
            <label for="password" class="block text-gray-700 font-bold mb-2"
              >비밀번호</label
            >
            <input
              type="password"
              id="password"
              name="password"
              minlength="6"
              class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
            <p class="text-sm text-gray-500 mt-1">
              최소 6자 이상의 비밀번호를 입력해주세요
            </p>
          </div>
          <div class="mb-4">
            <label
              for="confirmPassword"
              class="block text-gray-700 font-bold mb-2"
              >비밀번호 확인</label
            >
            <input
              type="password"
              id="confirmPassword"
              name="confirmPassword"
              class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
          </div>
          <div class="mb-6">
            <label for="email" class="block text-gray-700 font-bold mb-2"
              >이메일 주소</label
            >
            <input
              type="email"
              id="email"
              name="email"
              class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
          </div>
          <div class="mb-6 space-y-3">
            <div class="flex items-center">
              <input
                type="checkbox"
                id="agreeAll"
                class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500"
              />
              <label
                for="agreeAll"
                class="ml-2 text-sm font-medium text-gray-700"
                >전체 동의</label
              >
            </div>
            <div class="flex items-center">
              <input
                type="checkbox"
                id="agreeTerms"
                class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500"
                required
              />
              <label for="agreeTerms" class="ml-2 text-sm text-gray-700">
                <span class="font-medium">[필수]</span> 이용약관 동의
                <a href="#" class="text-blue-600 hover:underline">자세히</a>
              </label>
            </div>
            <div class="flex items-center">
              <input
                type="checkbox"
                id="agreePrivacy"
                class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500"
                required
              />
              <label for="agreePrivacy" class="ml-2 text-sm text-gray-700">
                <span class="font-medium">[필수]</span> 개인정보 처리방침 동의
                <a
                  href="/pages/privacy-policy.html"
                  class="text-blue-600 hover:underline"
                  >자세히</a
                >
              </label>
            </div>
          </div>
          <button
            type="submit"
            class="w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300"
          >
            회원가입
          </button>
        </form>
        <p id="signupMessage" class="mt-4 text-center text-red-500"></p>
      </div>
    </main>

    <footer
      class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white py-6 md:py-10"
    >
      <div class="container mx-auto px-6 lg:px-8">
        <!-- 모바일용 푸터 -->
        <div class="md:hidden space-y-3">
          <div class="flex justify-center space-x-4">
            <a
              href="pages/notice.html"
              class="text-gray-400 hover:text-blue-400 text-sm"
              >공지사항</a
            >
            <a
              href="pages/community.html"
              class="text-gray-400 hover:text-blue-400 text-sm"
              >커뮤니티</a
            >
            <a
              href="pages/petition.html"
              class="text-gray-400 hover:text-blue-400 text-sm"
              >청원·제안</a
            >
          </div>

          <div class="text-center text-sm text-gray-400">
            <a href="mailto:sungblab@gmail.com" class="hover:text-blue-400">
              sungblab@gmail.com
            </a>
          </div>
        </div>

        <!-- 데스크톱용 푸터 -->
        <div class="hidden md:grid grid-cols-3 gap-8">
          <!-- 기존 데스크톱 푸터 내용 유지 -->
          <div class="space-y-3">
            <h3 class="text-xl font-bold text-white mb-2">완·대·전</h3>
            <p class="text-gray-400 text-sm leading-relaxed">
              완도고등학교 학생들을 위한<br />
              더 나은 학교생활을 만들어가는<br />
              온라인 커뮤니티 플랫폼
            </p>
          </div>

          <div class="space-y-3">
            <h4 class="text-lg font-semibold text-white mb-2">바로가기</h4>
            <ul class="space-y-1.5">
              <li>
                <a
                  href="pages/notice.html"
                  class="text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
                  >공지사항</a
                >
              </li>
              <li>
                <a
                  href="pages/community.html"
                  class="text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
                  >커뮤니티</a
                >
              </li>
              <li>
                <a
                  href="pages/petition.html"
                  class="text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
                  >청원·제안</a
                >
              </li>
              <li>
                <a
                  href="pages/utility.html"
                  class="text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
                  >학급 도우미</a
                >
              </li>
            </ul>
          </div>

          <div class="space-y-3">
            <h4 class="text-lg font-semibold text-white mb-2">문의 및 정책</h4>
            <div class="space-y-1.5">
              <p class="flex items-center text-gray-400 text-sm">
                <i class="fas fa-envelope mr-2"></i>
                <a
                  href="mailto:sungblab@gmail.com"
                  class="hover:text-blue-400 transition-colors duration-300"
                  >sungblab@gmail.com</a
                >
              </p>
              <p class="flex items-center text-gray-400 text-sm">
                <i class="fas fa-map-marker-alt mr-2"></i>
                전남 완도군 완도읍 개포로 134
              </p>
              <a
                href="/pages/privacy-policy.html"
                class="block text-gray-400 hover:text-blue-400 transition-colors duration-300 text-sm"
              >
                <i class="fas fa-shield-alt mr-2"></i>
                개인정보 처리방침
              </a>
            </div>
          </div>
        </div>

        <!-- 공통 하단 영역 -->
        <div class="border-t border-gray-700 mt-8 pt-6">
          <div class="flex flex-col items-center space-y-3">
            <p class="text-xs text-gray-400 text-center">
              &copy; 2024 완도고등학교 학생회. All rights reserved.
            </p>
            <div class="flex space-x-4">
              <a
                href="#"
                class="text-gray-400 hover:text-blue-400 transition-colors duration-300"
              >
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <div
      id="termsModal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50"
    >
      <div
        class="bg-white rounded-lg w-11/12 max-w-2xl max-h-[80vh] overflow-y-auto"
      >
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-2xl font-bold">이용약관</h3>
            <button class="modal-close text-gray-500 hover:text-gray-700">
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                ></path>
              </svg>
            </button>
          </div>
          <div class="prose max-w-none">
            <section class="mb-6">
              <h4 class="text-xl font-semibold mb-4">제1조 (목적)</h4>
              <p class="mb-4">
                본 약관은 완도고등학교 학생회가 운영하는 완대전의 서비스 이용과
                관련하여 이용자의 권리, 의무 및 책임사항을 규정함을 목적으로
                합니다.
              </p>
            </section>

            <section class="mb-6">
              <h4 class="text-xl font-semibold mb-4">제2조 (정의)</h4>
              <ul class="list-disc pl-6 mb-4">
                <li>
                  "서비스"란 완도고등학교 학생들의 소통을 위해 제공하는 온라인
                  플랫폼을 의미합니다.
                </li>
                <li>
                  "이용자"란 본 약관에 따라 서비스를 이용하는 회원을 말합니다.
                </li>
                <li>
                  "회원"이란 완도고등학교 재학생으로서 서비스에 가입한 자를
                  말합니다.
                </li>
              </ul>
            </section>

            <section class="mb-6">
              <h4 class="text-xl font-semibold mb-4">
                제3조 (이용계약의 성립)
              </h4>
              <p class="mb-4">
                이용계약은 서비스 이용희망자의 이용약관 동의 및 이용신청에
                대하여 학생회가 승낙함으로써 성립합니다.
              </p>
            </section>

            <section class="mb-6">
              <h4 class="text-xl font-semibold mb-4">
                제4조 (서비스의 제공 및 변경)
              </h4>
              <p class="mb-4">학생회는 다음과 같은 서비스를 제공합니다:</p>
              <ul class="list-disc pl-6 mb-4">
                <li>커뮤니티 서비스</li>
                <li>학사일정 및 급식정보 제공</li>
                <li>청원 및 제안 의사항 접수</li>
                <li>기타 학생회가 정하는 서비스</li>
              </ul>
            </section>
          </div>
        </div>
      </div>
    </div>

    <div
      id="privacyModal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50"
    >
      <div
        class="bg-white rounded-lg w-11/12 max-w-2xl max-h-[80vh] overflow-y-auto"
      >
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-2xl font-bold">개인정보 처리방침</h3>
            <button class="modal-close text-gray-500 hover:text-gray-700">
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                ></path>
              </svg>
            </button>
          </div>
          <div class="prose max-w-none">
            <section class="mb-6">
              <p class="mb-4">
                정보통신망법 규정에 따라 완대전에 회원가입 신청하시는 분께
                수집하는 개인정보의 항목, 개인정보의 수집 및 이용목적,
                개인정보의 보유 및 이용기간을 안내드리오니 자세히 읽은 후
                동의하여 주시기 바랍니다.
              </p>
            </section>

            <section class="mb-6">
              <h4 class="text-xl font-semibold mb-4">1. 수집하는 개인정보</h4>
              <p class="mb-4">
                회원가입 시점에 완대전이 이용자로부터 수집하는 개인정보는 아래와
                같습니다.
              </p>
              <ul class="list-disc pl-6 mb-4">
                <li>필수항목: 학번, 실명, 닉네임, 비밀번호, 이메일 주소</li>
                <li>
                  서비스 이용 정에서 생성되는 정보: IP주소, 쿠키, 서비스 이용
                  기록
                </li>
              </ul>
            </section>

            <section class="mb-6">
              <h4 class="text-xl font-semibold mb-4">
                2. 수집한 개인정보의 이용
              </h4>
              <p class="mb-4">
                완대전은 다음과 같은 목적으로만 개인정보를 이용합니다:
              </p>
              <ul class="list-disc pl-6 mb-4">
                <li>회원 가입 의사의 확인</li>
                <li>회원제 서비스 제공</li>
                <li>학교 커뮤니티 서비스 제공</li>
                <li>회원자격 지·관리</li>
                <li>서비스 부정이용 방지</li>
              </ul>
            </section>

            <section class="mb-6">
              <h4 class="text-xl font-semibold mb-4">3. 개인정보의 보관기간</h4>
              <p class="mb-4">
                회원 탈퇴 시 즉시 파기하는 것을 원칙으로 하며, 다음의 정보에
                대해서는 명시한 기간 동안 보관합니다:
              </p>
              <ul class="list-disc pl-6 mb-4">
                <li>부정이용 기록: 1년</li>
                <li>로그인 기록: 3개월</li>
                <li>게시물 작성 기록: 서비스 종료 시까지</li>
              </ul>
            </section>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const mobileMenuButton = document.getElementById("mobile-menu-button");
        const mobileMenuClose = document.getElementById("mobile-menu-close");
        const mobileMenu = document.getElementById("mobile-menu");

        mobileMenuButton.addEventListener("click", () => {
          mobileMenu.classList.toggle("active");
        });

        mobileMenuClose.addEventListener("click", () => {
          mobileMenu.classList.remove("active");
        });
      });

      document.addEventListener("DOMContentLoaded", function () {
        const signupForm = document.getElementById("signupForm");
        const signupMessage = document.getElementById("signupMessage");

        signupForm.addEventListener("submit", async function (e) {
          e.preventDefault();

          const username = document.getElementById("username").value;
          const realName = document.getElementById("realName").value;
          const nickname = document.getElementById("nickname").value;
          const password = document.getElementById("password").value;
          const email = document.getElementById("email").value;

          // 학번 유효성 검사
          if (!/^\d{4}$/.test(username)) {
            signupMessage.textContent = "학번은 4자리 숫자여야 합니다.";
            signupMessage.style.color = "red";
            return;
          }

          // 비밀번호  유효성 검사
          if (password.length < 6) {
            signupMessage.textContent =
              "비밀번호는 최소 6자 이상이어야 합니다.";
            signupMessage.style.color = "red";
            return;
          }

          try {
            const response = await fetch("http://116.123.74.248/api/register", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                username,
                realName,
                nickname,
                password,
                email,
              }),
            });

            const data = await response.json();

            if (response.ok) {
              signupMessage.textContent =
                data.message + " 3초 후 메인 페이지로 이동합니다.";
              signupMessage.style.color = "green";
              signupForm.reset();

              setTimeout(() => {
                window.location.href = "/index.html";
              }, 3000);
            } else {
              signupMessage.textContent = data.message || "회원가입 실패";
              signupMessage.style.color = "red";
            }
          } catch (error) {
            console.error("Error:", error);
            signupMessage.textContent = "회원가입 중 오류가 발생했습니다.";
            signupMessage.style.color = "red";
          }
        });
      });

      document.addEventListener("DOMContentLoaded", function () {
        const password = document.getElementById("password");
        const confirmPassword = document.getElementById("confirmPassword");
        const agreeAll = document.getElementById("agreeAll");
        const agreeTerms = document.getElementById("agreeTerms");
        const agreePrivacy = document.getElementById("agreePrivacy");

        // 비밀번호 일치 확인
        confirmPassword.addEventListener("input", function () {
          if (password.value !== confirmPassword.value) {
            confirmPassword.setCustomValidity("비밀번호가 일치하지 않습니다.");
          } else {
            confirmPassword.setCustomValidity("");
          }
        });

        // 전체 동의 체크박스 처리
        agreeAll.addEventListener("change", function () {
          agreeTerms.checked = this.checked;
          agreePrivacy.checked = this.checked;
        });

        // 개별 체크박스 변경 시 전체 동의 상태 업데이트
        [agreeTerms, agreePrivacy].forEach((checkbox) => {
          checkbox.addEventListener("change", function () {
            agreeAll.checked = agreeTerms.checked && agreePrivacy.checked;
          });
        });
      });

      const termsModal = document.getElementById("termsModal");
      const privacyModal = document.getElementById("privacyModal");
      const termsLink = document.querySelector('a[href="#"]'); // 이용약관 링크
      const privacyLinks = document.querySelectorAll('a[href="/pages/privacy-policy.html"]'); // 개인정보처리방침 링크들
      const modalCloseButtons = document.querySelectorAll(".modal-close");

      function openModal(modal) {
        modal.classList.remove("hidden");
        modal.classList.add("flex");
        document.body.style.overflow = "hidden";
      }

      function closeModal(modal) {
        modal.classList.add("hidden");
        modal.classList.remove("flex");
        document.body.style.overflow = "auto";
      }

      function closeAllModals() {
        [termsModal, privacyModal].forEach(closeModal);
      }

      // 이용약관 링크 클릭 시
      termsLink.addEventListener("click", (e) => {
        e.preventDefault();
        openModal(termsModal);
      });

      // 개인정보처리방침 링크들 클릭 시
      privacyLinks.forEach(link => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          openModal(privacyModal);
        });
      });

      // 모달 닫기 버튼 클릭 시
      modalCloseButtons.forEach((button) => {
        button.addEventListener("click", () => {
          closeAllModals();
        });
      });

      // ESC 키로 모달 닫기
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeAllModals();
        }
      });

      // 모달 외부 영역 클릭 시 닫기
      [termsModal, privacyModal].forEach((modal) => {
        modal.addEventListener("click", (e) => {
          if (e.target === modal) {
            closeModal(modal);
          }
        });
      });

      // 비밀번호 확인 실시간 검증 개선
      const password = document.getElementById("password");
      const confirmPassword = document.getElementById("confirmPassword");
      const signupForm = document.getElementById("signupForm");

      function validatePassword() {
        if (password.value !== confirmPassword.value) {
          confirmPassword.setCustomValidity("비밀번호가 일치하지 않습니다.");
          confirmPassword.classList.add("border-red-500");
        } else {
          confirmPassword.setCustomValidity("");
          confirmPassword.classList.remove("border-red-500");
        }
      }

      password.addEventListener("input", validatePassword);
      confirmPassword.addEventListener("input", validatePassword);

      // 폼 제출 전 최종 유효성 검사
      signupForm.addEventListener("submit", function(e) {
        if (password.value !== confirmPassword.value) {
          e.preventDefault();
          alert("비밀번호가 일치하지 않습니다.");
          confirmPassword.focus();
        }
      });

      // 체크박스 관련 코드 개선
      const agreeAll = document.getElementById("agreeAll");
      const agreeTerms = document.getElementById("agreeTerms");
      const agreePrivacy = document.getElementById("agreePrivacy");
      const checkboxes = [agreeTerms, agreePrivacy];

      function updateAgreeAll() {
        agreeAll.checked = checkboxes.every(checkbox => checkbox.checked);
      }

      agreeAll.addEventListener("change", function() {
        checkboxes.forEach(checkbox => {
          checkbox.checked = this.checked;
        });
      });

      checkboxes.forEach(checkbox => {
        checkbox.addEventListener("change", updateAgreeAll);
      });
    </script>
  </body>
</html>
